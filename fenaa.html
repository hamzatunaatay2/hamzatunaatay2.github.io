<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tuna Galeri: 50 AraÃ§ Edition</title>
<style>
    :root { --bg: #0a0a0a; --card: #151515; --gold: #f1c40f; --red: #e74c3c; --green: #2ecc71; --blue: #3498db; }
    body { margin: 0; background: var(--bg); color: #eee; font-family: 'Segoe UI', sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
    .top-header { background: #000; padding: 15px 25px; display: flex; justify-content: space-around; border-bottom: 2px solid #333; z-index: 100; }
    .stat-box { display: flex; flex-direction: column; align-items: center; }
    .bar-outer { width: 100px; height: 8px; background: #222; border-radius: 4px; margin-top: 5px; }
    .bar-inner { height: 100%; border-radius: 4px; transition: 0.5s; }
    .main-grid { flex: 1; display: grid; grid-template-columns: 240px 1fr 300px; gap: 15px; padding: 15px; }
    .nav-panel { display: flex; flex-direction: column; gap: 10px; }
    .nav-link { background: var(--card); border: 1px solid #333; color: #aaa; padding: 15px; border-radius: 12px; cursor: pointer; text-align: left; transition: 0.3s; }
    .nav-link.active { background: var(--blue); color: #fff; border: none; }
    .viewport { background: #000; border-radius: 25px; border: 2px solid #222; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; }
    #npc-card { text-align: center; width: 80%; }
    .npc-avatar { width: 120px; height: 120px; background: #222; border-radius: 50%; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; font-size: 60px; border: 3px solid var(--gold); }
    .chat-bubble { background: #fff; color: #222; padding: 15px; border-radius: 15px; margin-bottom: 20px; font-weight: 600; position: relative; }
    .garage-panel { background: var(--card); border-radius: 25px; padding: 20px; border: 1px solid #333; display: flex; flex-direction: column; gap: 10px; }
    .car-preview { background: #000; height: 150px; border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 70px; border: 1px solid #222; }
    .action-btn { border: none; padding: 12px; border-radius: 10px; font-weight: 700; cursor: pointer; transition: 0.2s; text-transform: uppercase; font-size: 12px; }
    .btn-buy { background: var(--green); color: #000; }
    .btn-test { background: var(--gold); color: #000; }
    .btn-sell { background: var(--blue); color: #fff; }
    #three-canvas { width: 100%; height: 100%; display: none; }
    #setup-modal { position: absolute; background: rgba(0,0,0,0.95); padding: 30px; border-radius: 20px; border: 1px solid var(--gold); text-align: center; display: none; z-index: 100; width: 300px; }
</style>
</head>
<body>

    <header class="top-header">
        <div class="stat-box">ğŸ’° <span id="money-txt">500.000 â‚º</span></div>
        <div class="stat-box">ğŸ˜« STRES <div class="bar-outer"><div id="stress-bar" class="bar-inner" style="background:var(--red); width:0%"></div></div></div>
        <div class="stat-box">ğŸ•Œ Ä°MAN <div class="bar-outer"><div id="faith-bar" class="bar-inner" style="background:var(--blue); width:100%"></div></div></div>
        <div class="stat-box">ğŸ“… <span id="day-txt">Pazartesi</span></div>
    </header>

    <div class="main-grid">
        <nav class="nav-panel">
            <div class="nav-link active" onclick="goto('galeri')">ğŸ¢ GALERÄ°</div>
            <div class="nav-link" onclick="goto('mahalle')">ğŸ˜ï¸ MAHALLE</div>
            <div class="nav-link" onclick="goto('sanayi')">ğŸ”§ SANAYÄ°</div>
            <button class="action-btn" style="margin-top:auto; background:#333; color:#fff" onclick="endDay()">ğŸŒ™ GÃœNÃœ BÄ°TÄ°R</button>
        </nav>

        <main class="viewport">
            <div id="npc-card">
                <div class="chat-bubble" id="chat">"Buyur usta, 50 Ã§eÅŸit araba var, seÃ§ beÄŸen!"</div>
                <div class="npc-avatar" id="avatar">ğŸ¤µ</div>
                <h3 id="npc-name" style="color:var(--gold)">Mahmut Efendi</h3>
                <div id="options" style="display:grid; gap:8px; width:250px; margin:0 auto;"></div>
            </div>

            <div id="setup-modal">
                <h3 style="color:var(--gold)">HIZ SEÃ‡Ä°MÄ°</h3>
                <button class="action-btn btn-sell" style="width:100%; margin-bottom:5px;" onclick="selectedSpeed=0.4; launchDrive()">YAVAÅ</button>
                <button class="action-btn btn-sell" style="width:100%; margin-bottom:5px;" onclick="selectedSpeed=1.1; launchDrive()">ORTA</button>
                <button class="action-btn btn-sell" style="width:100%; margin-bottom:15px;" onclick="selectedSpeed=2.2; launchDrive()">HIZLI</button>
                <button class="action-btn btn-buy" style="width:100%; background:none; border:1px solid #444; color:#fff" onclick="document.getElementById('setup-modal').style.display='none'">Ä°PTAL</button>
            </div>
            <canvas id="three-canvas"></canvas>
        </main>

        <aside class="garage-panel">
            <h3 id="gal-name" onclick="rename()" style="text-align:center; cursor:pointer; color:var(--gold)">TUNA GALERÄ° âœ</h3>
            <div class="car-preview" id="side-car-icon">ğŸ¢</div>
            <h4 id="side-car-name" style="text-align:center; margin:0">ARAÃ‡ YOK</h4>
            <p id="side-car-price" style="text-align:center; color:#888">-</p>
            <div id="side-actions"><button class="action-btn btn-sell" style="width:100%" onclick="findCar()">ğŸš— ARAÃ‡ ARA</button></div>
        </aside>
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
    // --- 50 ARAÃ‡LIK DEV LÄ°STE SÄ°STEMÄ° ---
    const CAR_LIST = [
        // Ekonomik
        {n:"TofaÅŸ Åahin", p:250000, i:"ğŸš—", c:0xffffff}, {n:"Renault Toros", p:180000, i:"ğŸš—", c:0xdddddd}, {n:"Fiat Egea", p:850000, i:"ğŸš˜", c:0xaaaaaa},
        {n:"Hyundai i20", p:750000, i:"ğŸš—", c:0x3366ff}, {n:"Dacia Duster", p:950000, i:"ğŸšœ", c:0x445500}, {n:"VW Polo", p:900000, i:"ğŸš—", c:0xffffff},
        {n:"Toyota Corolla", p:1100000, i:"ğŸš˜", c:0xcccccc}, {n:"Honda Civic", p:1300000, i:"ğŸï¸", c:0xee0000}, {n:"Ford Focus", p:1050000, i:"ğŸš˜", c:0x0033aa},
        {n:"Opel Corsa", p:800000, i:"ğŸš—", c:0xffcc00},
        // Orta & LÃ¼ks
        {n:"BMW 320i", p:2800000, i:"ğŸï¸", c:0x000000}, {n:"Mercedes C200", p:3100000, i:"ğŸš˜", c:0xeeeeee}, {n:"Audi A4", p:2950000, i:"ğŸš˜", c:0x888888},
        {n:"Volvo S60", p:2700000, i:"ğŸ›¡ï¸", c:0x334455}, {n:"Skoda Superb", p:2200000, i:"ğŸš˜", c:0xffffff}, {n:"VW Passat", p:2400000, i:"ğŸš˜", c:0x111111},
        {n:"Peugeot 508", p:1900000, i:"ğŸï¸", c:0xcc0000}, {n:"Range Rover Evoque", p:4500000, i:"ğŸšœ", c:0x000000}, {n:"Porsche Macan", p:7500000, i:"ğŸï¸", c:0x330000},
        {n:"Tesla Model 3", p:2500000, i:"âš¡", c:0xffffff},
        // Spor & Efsane
        {n:"BMW M4", p:8500000, i:"ğŸï¸", c:0x0033ff}, {n:"Mercedes G63", p:18000000, i:"ğŸšœ", c:0x111111}, {n:"Ferrari F40", p:45000000, i:"ğŸ", c:0xff0000},
        {n:"Lamborghini Urus", p:25000000, i:"ğŸï¸", c:0xffff00}, {n:"Nissan GTR-R35", p:12000000, i:"ğŸï¸", c:0x888888}, {n:"Toyota Supra", p:9500000, i:"ğŸï¸", c:0xffaa00},
        {n:"Bugatti Chiron", p:120000000, i:"ğŸ’", c:0x000066}, {n:"Rolls Royce Ghost", p:35000000, i:"ğŸ‘‘", c:0x000000}, {n:"Bentley GT", p:22000000, i:"ğŸï¸", c:0x004400},
        {n:"Audi R8", p:15000000, i:"ğŸï¸", c:0xdddddd}, {n:"Ford Mustang", p:6500000, i:"ğŸ", c:0x0000ff}, {n:"Chevrolet Camaro", p:6000000, i:"ğŸï¸", c:0xffff00},
        {n:"Dodge Challenger", p:7000000, i:"ğŸï¸", c:0x222222}, {n:"Subaru Impreza", p:3500000, i:"ğŸï¸", c:0x0000ff}, {n:"Mitsubishi Lancer Evo", p:3800000, i:"ğŸï¸", c:0xcc0000},
        {n:"Mazda RX-7", p:5000000, i:"ğŸï¸", c:0xffffff}, {n:"Lotus Elise", p:4200000, i:"ğŸï¸", c:0x00ff00}, {n:"Aston Martin DB11", p:18000000, i:"ğŸï¸", c:0x445566},
        {n:"Maserati MC20", p:21000000, i:"ğŸï¸", c:0xcccccc}, {n:"Pagani Huayra", p:85000000, i:"ğŸï¸", c:0x555555}, {n:"Koenigsegg Jesko", p:95000000, i:"ğŸï¸", c:0xffffff},
        {n:"McLaren 720S", p:14500000, i:"ğŸï¸", c:0xff6600}, {n:"Jaguar F-Type", p:5800000, i:"ğŸï¸", c:0x003300}, {n:"Land Rover Defender", p:7200000, i:"ğŸšœ", c:0x333300},
        {n:"Jeep Wrangler", p:5500000, i:"ğŸšœ", c:0xddaa00}, {n:"Alfa Romeo Giulia", p:3200000, i:"ğŸï¸", c:0xaa0000}, {n:"Lexus LS500", p:6500000, i:"ğŸš˜", c:0xeeeeee},
        {n:"Mini Cooper S", p:1600000, i:"ğŸš—", c:0x003300}, {n:"Fiat 500 Abarth", p:1400000, i:"ğŸš—", c:0xffffff}, {n:"Suzuki Jimny", p:1800000, i:"ğŸšœ", c:0x88aa00}
    ];

    let state = { money: 500000, stress: 0, faith: 100, day: 0, car: null, trend: 1.0 };
    let selectedSpeed = 1.1;
    let isDriving = false;

    function goto(l) {
        state.loc = l;
        const opt = document.getElementById('options'); opt.innerHTML = "";
        if(l==='galeri') {
            setNPC("ğŸ¤µ", "Mahmut", "HoÅŸgeldin kral. ArabanÄ± hazÄ±rla.");
            if(state.car) opt.innerHTML = `<button class="action-btn btn-test" onclick="document.getElementById('setup-modal').style.display='block'">ğŸ TESTE Ã‡IK</button><button class="action-btn btn-sell" onclick="sell()">ğŸ’° SAT</button>`;
        } else if(l==='mahalle') {
            setNPC("ğŸ‘³", "HacÄ± Abi", "Selamun aleykÃ¼m evlat.");
            opt.innerHTML = `<button class="action-btn btn-buy" onclick="state.faith=100; updateUI();">ğŸ•Œ NAMAZ KIL</button>`;
        } else if(l==='sanayi') {
            setNPC("ğŸ‘¨â€ğŸ”§", "Usta", "KarnÄ±n aÃ§ mÄ±?");
            opt.innerHTML = `<button class="action-btn btn-sell" onclick="state.stress=0; state.money-=1000; updateUI();">ğŸ” KÃ–FTE YE (1k â‚º)</button>`;
        }
        updateUI();
    }

    function findCar() {
        if(state.stress >= 100) return alert("Ã‡ok gerginsin!");
        const c = CAR_LIST[Math.floor(Math.random()*CAR_LIST.length)];
        const p = Math.floor(c.p * (0.85 + Math.random()*0.3) * state.trend);
        setNPC("ğŸ‘¤", "SatÄ±cÄ±", `${c.n} var. â‚º${p.toLocaleString()} olur.`);
        document.getElementById('options').innerHTML = `<button class="action-btn btn-buy" onclick="buy('${c.n}', ${p}, '${i=c.i}', ${c.c})">AL</button>`;
    }

    function buy(n,p,i,c) {
        if(state.money >= p) { state.money -= p; state.car = {n,p,i,c}; state.stress += 30; goto('galeri'); }
        else alert("Para yok!");
    }

    function sell() {
        const p = Math.floor(state.car.p * (0.8 + Math.random()*0.4));
        alert(`AracÄ± â‚º${p.toLocaleString()} fiyata sattÄ±n!`);
        state.money += p; state.car = null; goto('galeri');
    }

    function endDay() { state.day++; state.trend = 0.7 + Math.random()*0.6; state.stress = Math.max(0, state.stress-30); alert("GÃ¼n bitti, piyasa oynadÄ±!"); updateUI(); }
    function setNPC(a,n,t) { document.getElementById('avatar').innerText=a; document.getElementById('npc-name').innerText=n; document.getElementById('chat').innerText=`"${t}"`; }
    function updateUI() {
        document.getElementById('money-txt').innerText = state.money.toLocaleString() + " â‚º";
        document.getElementById('stress-bar').style.width = state.stress + "%";
        document.getElementById('faith-bar').style.width = state.faith + "%";
        if(state.car) {
            document.getElementById('side-car-icon').innerText = state.car.i;
            document.getElementById('side-car-name').innerText = state.car.n;
            document.getElementById('side-car-price').innerText = "DeÄŸer: â‚º" + state.car.p.toLocaleString();
        }
    }

    // --- 3D SÃœRÃœÅ (AYNI MEKANÄ°K) ---
    const canvas = document.getElementById('three-canvas');
    const scene = new THREE.Scene(); scene.fog = new THREE.Fog(0, 1, 80);
    const camera = new THREE.PerspectiveCamera(75, 2, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
    const road = new THREE.Mesh(new THREE.PlaneGeometry(15, 300), new THREE.MeshStandardMaterial({color: 0x111111}));
    road.rotation.x = -Math.PI/2; scene.add(road);
    const lines = [];
    for(let i=0; i<30; i++) {
        let l = new THREE.Mesh(new THREE.PlaneGeometry(0.3, 6), new THREE.MeshBasicMaterial({color:0xffffff}));
        l.rotation.x = -Math.PI/2; l.position.set(0, 0.05, -i*15);
        scene.add(l); lines.push(l);
    }
    const playerCar = new THREE.Group();
    function buildCar(color) {
        playerCar.clear();
        const b = new THREE.Mesh(new THREE.BoxGeometry(1.6, 0.6, 3.5), new THREE.MeshStandardMaterial({color}));
        b.position.y = 0.5;
        const h = new THREE.SpotLight(0xffffff, 50, 40, 0.5, 0.5);
        h.position.set(0, 0.6, -1.7); h.target.position.set(0,0,-20);
        playerCar.add(b, h, h.target);
    }
    scene.add(playerCar, new THREE.AmbientLight(0xffffff, 0.1));
    camera.position.set(0, 6, 11); camera.lookAt(0,0,-3);

    function launchDrive() {
        document.getElementById('setup-modal').style.display='none'; document.getElementById('npc-card').style.display='none';
        canvas.style.display='block'; isDriving=true; buildCar(state.car.c); animate();
    }
    function animate() {
        if(!isDriving) return; requestAnimationFrame(animate);
        lines.forEach(l => { l.position.z += selectedSpeed * 8; if(l.position.z > 20) l.position.z = -250; });
        renderer.render(scene, camera);
    }
    window.addEventListener('keydown', (e) => {
        if(!isDriving) return;
        if(e.key === 'a' || e.key === 'ArrowLeft') playerCar.position.x = Math.max(-6, playerCar.position.x - 0.7);
        if(e.key === 'd' || e.key === 'ArrowRight') playerCar.position.x = Math.min(6, playerCar.position.x + 0.7);
        if(e.key === 'Escape') { isDriving=false; canvas.style.display='none'; document.getElementById('npc-card').style.display='block'; }
    });
    updateUI();
</script>
</body>
</html>
