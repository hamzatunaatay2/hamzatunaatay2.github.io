<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Halvior AI Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  background:#0f172a;
  font-family:Segoe UI;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  color:white;
}
.chat-container{
  width:500px;
  height:700px;
  background:#1e293b;
  border-radius:25px;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}
.header{
  background:linear-gradient(90deg,#3b82f6,#8b5cf6);
  padding:20px;
  text-align:center;
  font-weight:bold;
}
.messages-area{
  flex:1;
  padding:20px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.message{
  padding:12px 16px;
  border-radius:18px;
  max-width:85%;
}
.bot-message{background:#334155;align-self:flex-start;}
.user-message{background:#3b82f6;align-self:flex-end;}
.loading{font-style:italic;color:#94a3b8;}
.input-area{
  padding:20px;
  display:flex;
  gap:10px;
  background:#0f172a;
}
input{
  flex:1;
  padding:12px 20px;
  border-radius:30px;
  border:none;
  outline:none;
}
button{
  background:#3b82f6;
  border:none;
  color:white;
  padding:10px 25px;
  border-radius:30px;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="chat-container">
  <div class="header">ðŸŽ® HALVIOR AI GAME</div>
  <div class="messages-area" id="box">
    <div class="message bot-message">Selam knk ðŸ˜Ž Oyuna hoÅŸ geldin</div>
  </div>
  <div class="input-area">
    <input id="input" placeholder="Mesaj yaz..." onkeypress="if(event.key==='Enter')send()">
    <button onclick="send()">GÃ¶nder</button>
  </div>
</div>

<script>
// ===== PLAYER DATA =====
let player = JSON.parse(localStorage.getItem("halviorPlayer")) || {
  xp:0, level:1, messages:0, taught:0
};
let memory = JSON.parse(localStorage.getItem("halviorMemory")) || {};

// ===== BRAIN =====
const brain = {
  "merhaba":"Selam knk!",
  "nasilsin":"Ä°yiyim kral, sen?",
  "oyun":"Åžu an benimle oyun oynuyorsun ðŸ˜Ž",
  "level":"Levelin: {level} | XP: {xp}",
  "default":"Devam et knk, Ã¶ÄŸreniyorum ðŸ‘€"
};

// ===== UTILS =====
function norm(t){
  return t.toLowerCase()
  .replace(/Ä±/g,"i").replace(/ÄŸ/g,"g")
  .replace(/Ã¼/g,"u").replace(/ÅŸ/g,"s")
  .replace(/Ã¶/g,"o").replace(/Ã§/g,"c");
}

function add(text,cls){
  const d=document.createElement("div");
  d.classList.add("message",cls);
  d.innerText=text;
  box.appendChild(d);
  box.scrollTop=box.scrollHeight;
}

function gainXP(x){
  player.xp+=x;
  player.level=Math.floor(player.xp/100)+1;
  localStorage.setItem("halviorPlayer",JSON.stringify(player));
}

// ===== AI =====
function reply(text){
  if(memory[text]) return memory[text];

  for(let k in brain){
    if(text.includes(k)){
      return brain[k]
        .replace("{level}",player.level)
        .replace("{xp}",player.xp);
    }
  }

  if(text.startsWith("ogret:")){
    let p=text.replace("ogret:","").split("=");
    if(p.length===2){
      memory[p[0].trim()] = p[1].trim();
      player.taught++;
      gainXP(25);
      localStorage.setItem("halviorMemory",JSON.stringify(memory));
      return "Ã–ÄŸrendim knk ðŸ§  +25XP";
    }
  }

  return brain.default + (player.level>3 ? " ðŸ”¥" : "");
}

// ===== SEND =====
function send(){
  const t=input.value.trim();
  if(!t) return;
  add(t,"user-message");
  input.value="";
  gainXP(10);
  player.messages++;
  const l=document.createElement("div");
  l.classList.add("message","bot-message","loading");
  l.innerText="DÃ¼ÅŸÃ¼nÃ¼yorum...";
  box.appendChild(l);

  setTimeout(()=>{
    l.remove();
    add(reply(norm(t)),"bot-message");
  },700);
}
</script>
</body>
</html>
