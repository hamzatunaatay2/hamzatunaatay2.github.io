<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>SANAYÄ° BARONU: 20 LEÅ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --main: #c0392b; --bg: #05070a; --card: #111827; --text: #f3f4f6; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; overflow: hidden; }
        .grid { display: grid; grid-template-columns: 350px 1fr 350px; gap: 10px; height: 98vh; }
        .panel { background: var(--card); border-radius: 10px; padding: 12px; border: 1px solid #1f2937; display: flex; flex-direction: column; overflow: hidden; }
        
        /* SCROLLS */
        .scroll { overflow-y: auto; flex: 1; padding-right: 5px; }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--main); }

        /* LISTS */
        .item-row { background: #0b0f19; padding: 8px; margin-bottom: 5px; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; border-left: 3px solid #374151; font-size: 0.85rem; }
        .wanted-bar { height: 5px; background: #333; margin-top: 5px; border-radius: 10px; }
        .wanted-fill { height: 100%; background: #e74c3c; transition: 0.3s; }

        /* CHAT */
        .ai-chat { flex: 1; background: #000; padding: 10px; font-family: monospace; font-size: 0.75rem; border: 1px solid #334155; margin-bottom: 5px; }
        
        /* BTNS */
        .btn { border: none; padding: 6px 10px; border-radius: 4px; cursor: pointer; font-weight: bold; color: #fff; font-size: 0.75rem; }
        .btn-red { background: #c0392b; }
        .btn-green { background: #27ae60; }
        .btn-blue { background: #2980b9; }

        .car-card { background: #1f2937; padding: 10px; border-radius: 8px; margin-bottom: 8px; border: 1px solid #374151; }
        .flash { animation: flash-red 0.5s infinite; }
        @keyframes flash-red { 0%, 100% { color: #fff; } 50% { color: #ff0000; } }
    </style>
</head>
<body>

<div style="background:var(--card); padding:10px; border-radius:10px; margin-bottom:10px; display:flex; justify-content: space-between; align-items:center; border-bottom:3px solid var(--main);">
    <div>ğŸ’° NAKÄ°T: <b id="m-money" style="color:#2ecc71">0</b> TL | ğŸ  KASA (SAFE): <b id="m-safe" style="color:#f1c40f">0</b> TL</div>
    <div id="status-label" style="font-weight:bold; letter-spacing:1px;">SANAYÄ° SAKÄ°N...</div>
    <div>ğŸ‘‘ Ä°TÄ°BAR: <b id="m-rep">0</b> | ğŸš¨ ARANMA: <div class="wanted-bar" style="width:100px; display:inline-block;"><div id="wanted-fill" class="wanted-fill"></div></div></div>
</div>

<div class="grid">
    <div class="panel">
        <h3 style="color:#2ecc71"><i class="fas fa-chart-line"></i> BORSA Ä°STANBUL</h3>
        <div id="stocks" class="scroll"></div>
        <hr style="border:0.5px solid #333">
        <h3><i class="fas fa-home"></i> GÃœVENLÄ° EV</h3>
        <button class="btn btn-blue" onclick="stashMoney()" style="width:100%; margin-bottom:5px;">PARAYI KASAYA KÄ°LÄ°TLE (%10 Komisyon)</button>
        <button class="btn btn-green" onclick="payPolice()" style="width:100%;">RÃœÅVET VER (500.000 TL)</button>
        <div style="font-size: 0.7rem; color: #94a3b8; margin-top:10px;">*Kasaya attÄ±ÄŸÄ±n paraya polis Ã§Ã¶kemez.</div>
    </div>

    <div class="panel">
        <h3><i class="fas fa-skull-crossbones"></i> KARANLIK CHAT</h3>
        <div class="ai-chat" id="chat-box" class="scroll"></div>
        <div style="display:flex; gap:5px; margin-bottom:15px;">
            <input type="text" id="user-msg" placeholder="Raconunu kes..." style="flex:1; background:#000; color:white; border:1px solid #334155; padding:8px;" onkeypress="if(event.key==='Enter') sendMessage()">
            <button class="btn btn-red" onclick="sendMessage()">YOLLA</button>
        </div>
        <h3><i class="fas fa-car"></i> GALERÄ° VÄ°TRÄ°NÄ°</h3>
        <div id="market" class="scroll"></div>
    </div>

    <div class="panel">
        <h3><i class="fas fa-crosshairs"></i> HEDEFLER (20 KÄ°ÅÄ°)</h3>
        <div id="targets" class="scroll"></div>
        <div style="margin-top:10px; font-size:0.75rem; background:#000; padding:5px; border-radius:5px;">
            <b>GÃ–REV:</b> TÃ¼m rakipleri temizle ve paralarÄ±nÄ± kasana at.
        </div>
    </div>
</div>

<script>
let state = { money: 1000000, safeMoney: 0, rep: 0, wanted: 0, stocks: [0,0,0,0,0], garage: [] };
const stockNames = ["REÄ°S GYO", "KOCAELÄ° Ã‡ELÄ°K", "GÃ–LCÃœK MARÄ°NA", "HIZLI ALSAT", "SANAYÄ° COIN"];
let stockPrices = [120, 450, 800, 50, 2000];

const names = ["Ã‡akal Nuri", "Kel Mahmut", "SÃ¼lÃ¼n Osman", "Baron Erol", "Laz Ziya", "Testere Necmi", "KÄ±lÄ±Ã§", "Pala", "Tuncay", "Abuzer", "Erdal", "TombalacÄ±", "Muro", "Ã‡eto", "Azer", "Timsah", "Vartolu", "Cumali", "YamaÃ§", "Ebu Zer"];
let targets = names.map(n => ({ name: n, money: Math.floor(Math.random()*5000000) + 500000, alive: true }));

function init() {
    render();
    setInterval(tick, 3000);
    setInterval(aiChatter, 6000);
    addChatMsg("SÄ°STEM", "Piyasaya hoÅŸ geldin Baron. 20 rakibin var. Hepsini paketle.", "color:gray");
}

function tick() {
    // Ekonomi
    stockPrices = stockPrices.map(p => Math.max(10, p + (Math.random()*40 - 20)));
    if(state.wanted > 0) state.wanted -= 1;
    
    // Polis BaskÄ±nÄ±
    if(state.wanted > 60 && Math.random() > 0.85) {
        let loss = Math.floor(state.money * 0.8);
        state.money -= loss;
        state.wanted = 0;
        alert("ğŸš¨ BASKIN! Polis Ã¼zerindeki " + loss.toLocaleString() + " TL'ye el koydu! Kasadaki parana dokunamadÄ±lar.");
    }
    render();
}

function render() {
    document.getElementById("m-money").innerText = Math.floor(state.money).toLocaleString();
    document.getElementById("m-safe").innerText = Math.floor(state.safeMoney).toLocaleString();
    document.getElementById("m-rep").innerText = state.rep;
    document.getElementById("wanted-fill").style.width = state.wanted + "%";
    document.getElementById("status-label").innerText = state.wanted > 70 ? "ğŸ”¥ ARANIYORSUN!" : "SANAYÄ° SAKÄ°N...";
    document.getElementById("status-label").className = state.wanted > 70 ? "flash" : "";

    // Borsa
    document.getElementById("stocks").innerHTML = stockNames.map((n, i) => `
        <div class="item-row">
            <span>${n}: <b>${Math.floor(stockPrices[i])}</b></span>
            <div>
                <button class="btn btn-green" onclick="buyStock(${i})">AL</button>
                <button class="btn btn-red" onclick="sellStock(${i})">SAT</button>
            </div>
        </div>
    `).join('') + `<p style="font-size:0.6rem">PortfÃ¶y: ${state.stocks.join(' | ')}</p>`;

    // Hedefler
    document.getElementById("targets").innerHTML = targets.map((t, i) => `
        <div class="item-row" style="opacity: ${t.alive ? 1 : 0.4}">
            <span>${t.alive ? 'ğŸ¯' : 'ğŸ’€'} ${t.name}</span>
            ${t.alive ? `<button class="btn btn-red" onclick="shoot(${i})">VUR ğŸ”«</button>` : '<span>MEFTA</span>'}
        </div>
    `).join('');

    // Market
    const cars = ["TofaÅŸ", "Passat", "S600", "Range", "M5"];
    document.getElementById("market").innerHTML = Array.from({length:2}, () => {
        let p = Math.floor(Math.random()*2000000) + 200000;
        let n = cars[Math.floor(Math.random()*5)];
        return `<div class="car-card"><b>${n}</b> - ${p.toLocaleString()} TL <button class="btn btn-green" style="float:right" onclick="buyCar(${p})">AL</button></div>`;
    }).join('');
}

// AKSÄ°YONLAR
function shoot(idx) {
    if(!targets[idx].alive) return;
    let success = Math.random() > 0.4;
    if(success) {
        let loot = Math.floor(targets[idx].money * 0.3);
        state.money += loot;
        state.rep += 100;
        state.wanted += 25;
        targets[idx].alive = false;
        addChatMsg("SÄ°STEM", `${targets[idx].name} indirildi. ${loot.toLocaleString()} TL cebe indi.`, "color:red; font-weight:bold;");
    } else {
        state.wanted += 15;
        addChatMsg("SÄ°STEM", "Iska geÃ§tin! Mahalle ayaÄŸa kalktÄ± aq.", "color:orange");
    }
    render();
}

function stashMoney() {
    if(state.money > 1000) {
        let amt = state.money;
        state.money = 0;
        state.safeMoney += (amt * 0.9);
        addChatMsg("BANKA", "Para kasaya kilitlendi. Polis artÄ±k dokunamaz.", "color:yellow");
        render();
    }
}

function payPolice() {
    if(state.money >= 500000) {
        state.money -= 500000;
        state.wanted = 0;
        addChatMsg("SÄ°STEM", "RÃ¼ÅŸvet verildi, dosya kapandÄ±.", "color:cyan");
        render();
    }
}

function buyStock(i) { if(state.money >= stockPrices[i]) { state.money -= stockPrices[i]; state.stocks[i]++; render(); } }
function sellStock(i) { if(state.stocks[i] > 0) { state.stocks[i]--; state.money += stockPrices[i]; render(); } }
function buyCar(p) { if(state.money >= p) { state.money -= p; state.rep += 50; render(); } }

function aiChatter() {
    const alive = targets.filter(t => t.alive);
    if(alive.length > 0) {
        const t = alive[Math.floor(Math.random()*alive.length)];
        const msgs = ["Dolar artÄ±yor aq!", "Borsa'da Marina hissesi fena patladÄ±.", "Sanayide biri herkesi vuruyor, dikkat edin.", "Baronluk senin neyine lale!", "Para bitti dert bitmedi be."];
        addChatMsg(t.name, msgs[Math.floor(Math.random()*msgs.length)], "color:#3498db");
    }
}

function sendMessage() {
    const input = document.getElementById("user-msg");
    addChatMsg("SEN (BARON)", input.value, "color:#f1c40f");
    input.value = "";
}

function addChatMsg(u, t, s) {
    const box = document.getElementById("chat-box");
    box.innerHTML += `<div style="${s}"><b>${u}:</b> ${t}</div>`;
    box.scrollTop = box.scrollHeight;
}

init();
</script>
</body>
</html>
