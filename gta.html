<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forbidden Nights v9: Expanded Romance</title>
    <style>
        :root { --hot-pink: #ff007f; --deep-purple: #2e003e; --gold: #ffd700; --soft-red: #ff3366; }
        body { margin: 0; background: #050505; color: #fff; font-family: 'Arial', sans-serif; overflow: hidden; }
        
        #ui-top { position: fixed; top: 0; width: 100%; height: 60px; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: space-around; border-bottom: 2px solid var(--hot-pink); z-index: 1000; }
        .stat { font-weight: bold; font-size: 18px; }
        .stat span { color: var(--hot-pink); }

        #main-stage { display: grid; grid-template-columns: 350px 1fr; height: 100vh; padding-top: 60px; }
        
        #partner-list { background: #111; padding: 20px; border-right: 1px solid #333; overflow-y: auto; }
        .partner-card { background: #1a1a1a; border: 1px solid #333; padding: 15px; border-radius: 10px; margin-bottom: 15px; cursor: pointer; transition: 0.3s; }
        .partner-card:hover { border-color: var(--hot-pink); transform: scale(1.02); }
        .bar-bg { background: #333; height: 8px; width: 100%; border-radius: 4px; margin-top: 5px; }
        .bar-fill { height: 100%; border-radius: 4px; transition: 0.5s; }

        #game-view { position: relative; background: radial-gradient(circle, #1a001a 0%, #000 100%); display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        #action-menu { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; width: 80%; max-width: 500px; margin-top: 20px; }
        .action-btn { background: #222; border: 1px solid var(--hot-pink); color: #fff; padding: 15px; cursor: pointer; border-radius: 5px; font-weight: bold; text-transform: uppercase; }
        .action-btn:hover { background: var(--hot-pink); color: #000; }

        /* TELEFON Sƒ∞STEMƒ∞ */
        #phone-trigger { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; background: var(--gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; z-index: 3000; box-shadow: 0 0 15px var(--gold); }
        #phone { position: fixed; bottom: -600px; right: 20px; width: 300px; height: 550px; background: #000; border: 5px solid #222; border-radius: 35px; transition: 0.6s cubic-bezier(0.1, 0.7, 1.0, 0.1); z-index: 2000; padding: 20px; box-shadow: 0 0 50px #000; }
        #phone.active { bottom: 90px; }
        .app-screen { display: none; height: 100%; flex-direction: column; }
        .app-screen.active { display: flex; }
        .app-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 40px; }
        .app-icon { background: #111; padding: 20px; border-radius: 20px; text-align: center; font-size: 30px; cursor: pointer; border: 1px solid #222; }
        .app-icon:hover { border-color: var(--gold); }

        /* MESAJLA≈ûMA EKRANI */
        #app-messages { padding: 10px; }
        #chat-window { flex-grow: 1; border: 1px solid #333; padding: 10px; overflow-y: auto; height: 250px; margin-bottom: 10px; background: #0a0a0a; }
        .message { margin-bottom: 8px; }
        .user-msg { text-align: right; color: var(--gold); }
        .partner-msg { text-align: left; color: #ccc; }
        #message-input { display: flex; }
        #msg-text { flex-grow: 1; padding: 8px; background: #222; border: 1px solid #555; color: #fff; }
        #send-btn { background: var(--hot-pink); color: #fff; border: none; padding: 8px 12px; cursor: pointer; }

        /* Sƒ∞NEMATƒ∞K EKRAN */
        #cinematic { 
            position: fixed; inset: 0; 
            background: linear-gradient(to bottom, #100 0%, #000 100%); 
            z-index: 5000; display: none; 
            flex-direction: column; align-items: center; justify-content: center; 
            text-align: center;
        }
        #cinematic.active { display: flex; }

        #bedroom-bg {
            position: absolute; inset: 0;
            background-image: url('https://i.imgur.com/your_bedroom_bg_image.jpg'); /* Buraya yatak odasƒ± g√∂rseli eklenecek */
            background-size: cover; background-position: center;
            filter: brightness(0.3) blur(5px);
            z-index: -1;
        }

        .char-silhouette {
            font-size: 180px; filter: blur(2px);
            position: absolute; 
            animation: moveAndPulse 1.5s infinite alternate;
        }
        #char1 { top: 30%; left: 35%; color: var(--soft-red); }
        #char2 { top: 40%; right: 30%; color: var(--hot-pink); }

        @keyframes moveAndPulse {
            0% { transform: translateY(0px) scale(1); opacity: 0.7; }
            100% { transform: translateY(-10px) scale(1.05); opacity: 1; }
        }
        
        #cinematic-dialog { font-size: 28px; color: var(--gold); margin-top: 40px; font-style: italic; font-family: 'Georgia', serif; text-shadow: 0 0 15px #000; }
        
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="ui-top">
    <div class="stat">Lƒ∞Bƒ∞DO: <span id="libido">100</span></div>
    <div class="stat">KASA: <span id="money">0</span>‚Ç∫</div>
    <div class="stat">PRESTƒ∞J: <span id="prestige">Acemi</span></div>
</div>

<div id="main-stage">
    <div id="partner-list">
        <h2 style="color:var(--hot-pink)">PARTNERLER</h2>
        <div id="partners-container"></div>
    </div>

    <div id="game-view">
        <div id="char-display" style="text-align:center;">
            <div id="char-img" style="font-size:150px; margin-bottom:20px;">üë§</div>
            <h2 id="char-name">Bir partner se√ß...</h2>
            <p id="char-desc" style="color:#888;">Etkile≈üime ge√ßmek i√ßin soldan birini se√ßmelisin.</p>
        </div>

        <div id="action-menu" class="hidden">
            <button class="action-btn" onclick="openApp('messages')">üí¨ MESAJ AT</button>
            <button class="action-btn" onclick="interact('gift')">üéÅ HEDƒ∞YE VER (1000‚Ç∫)</button>
            <button class="action-btn" style="border-color:var(--gold)" onclick="startSex()">üî• ODAYA GE√á</button>
        </div>
    </div>
</div>

<button id="phone-trigger" onclick="togglePhone()">üì±</button>

<div id="phone">
    <div class="app-screen active" id="phone-home">
        <div style="text-align:center; font-size:12px; color:#444;">ForbiddenOS v9</div>
        <div class="app-grid">
            <div class="app-icon" onclick="openApp('messages')">üí¨</div>
            <div class="app-icon" onclick="alert('Profili d√ºzenle...')">‚öôÔ∏è</div>
            <div class="app-icon" onclick="alert('Yeni partnerler geliyor!')">‚ûï</div>
            <div class="app-icon" onclick="togglePhone()">‚ùå</div>
        </div>
    </div>

    <div class="app-screen" id="app-messages">
        <button onclick="openApp('main')" style="background:none; color:var(--gold); border:none; cursor:pointer;">‚¨Ö Geri</button>
        <h3 style="text-align:center; color:var(--hot-pink);">MESAJLAR</h3>
        <div id="current-chat" class="hidden">
            <h4 id="chat-partner-name" style="text-align:center; margin:10px 0;"></h4>
            <div id="chat-window"></div>
            <div id="message-input">
                <input type="text" id="msg-text" placeholder="Mesajƒ±nƒ± yaz..." />
                <button id="send-btn" onclick="sendMessage()">G√ñNDER</button>
            </div>
        </div>
        <div id="no-chat-selected" style="text-align:center; color:#888; margin-top:50px;">
            Mesajla≈ümak i√ßin bir partner se√ß.
        </div>
    </div>
</div>


<div id="cinematic">
    <div id="bedroom-bg"></div>
    <div id="char1" class="char-silhouette"></div>
    <div id="char2" class="char-silhouette"></div>
    <div id="cinematic-dialog">Aksiyon ba≈ülƒ±yor...</div>
    <div style="margin-top:20px; color:#444;">[ SAHNE DEVAM EDƒ∞YOR... ]</div>
</div>

<script>
    let player = { libido: 100, money: 10000, prestige: 0 };
    let partners = [
        { id: 0, name: "Selin", icon: "üë©‚Äçü¶∞", desire: 20, trust: 10, desc: "√úniversiteli, utanga√ß ama meraklƒ±.", messages: [], chatOpened: false },
        { id: 1, name: "Arzu", icon: "üë©‚Äçüíº", desire: 50, trust: 30, desc: "Sekreter, sert ve otoriter kadƒ±nlardan ho≈ülanƒ±yor.", messages: [], chatOpened: false },
        { id: 2, name: "Melis", icon: "üë±‚Äç‚ôÄÔ∏è", desire: 80, trust: 60, desc: "Gece hayatƒ±nƒ±n yƒ±ldƒ±zƒ±, sƒ±nƒ±r tanƒ±mƒ±yor.", messages: [], chatOpened: false },
        { id: 3, name: "Elif", icon: "üë©‚Äç‚öïÔ∏è", desire: 10, trust: 5, desc: "Hem≈üire, nazik ve ≈üefkatli. Uzun s√ºreli ili≈üki arƒ±yor.", messages: [], chatOpened: false },
        { id: 4, name: "Zeynep", icon: "üë©‚Äçüç≥", desire: 40, trust: 25, desc: "≈ûef a≈ü√ßƒ±, mutfakta olduƒüu kadar yatakta da ate≈üli.", messages: [], chatOpened: false },
        { id: 5, name: "Gizem", icon: "üë©‚Äçüé§", desire: 70, trust: 40, desc: "Rock solisti, asi ruhlu ve tutkulu.", messages: [], chatOpened: false },
        { id: 6, name: "Leyla", icon: "üíÉ", desire: 60, trust: 35, desc: "Dans√ßƒ±, esnek v√ºcudu ve √ßekiciliƒüiyle tanƒ±nƒ±yor.", messages: [], chatOpened: false },
        { id: 7, name: "Aslƒ±", icon: "üé®", desire: 25, trust: 15, desc: "Ressam, sanatsal ruhuyla seni ba≈ütan √ßƒ±karacak.", messages: [], chatOpened: false },
        { id: 8, name: "Deniz", icon: "üèä‚Äç‚ôÄÔ∏è", desire: 30, trust: 20, desc: "Y√ºz√ºc√º, atletik ve dinamik bir v√ºcuda sahip.", messages: [], chatOpened: false },
        { id: 9, name: "Burcu", icon: "üßò‚Äç‚ôÄÔ∏è", desire: 55, trust: 30, desc: "Yoga eƒüitmeni, sakin ama derin tutkulara sahip.", messages: [], chatOpened: false }
    ];

    let currentPartner = null;
    let selectedChatPartnerId = -1;

    function updateHUD() {
        document.getElementById('libido').innerText = player.libido;
        document.getElementById('money').innerText = player.money.toLocaleString();
        let prestigeText = "Acemi";
        if(player.prestige > 500) prestigeText = "√áapkƒ±n";
        if(player.prestige > 2000) prestigeText = "Efsane A≈üƒ±k";
        document.getElementById('prestige').innerText = prestigeText;
    }

    function renderPartners() {
        const container = document.getElementById('partners-container');
        container.innerHTML = "";
        partners.forEach((p, i) => {
            container.innerHTML += `
                <div class="partner-card" onclick="selectPartner(${i})">
                    <div style="font-size:24px">${p.icon} ${p.name}</div>
                    <div style="font-size:12px; color:#888; margin:5px 0;">Arzu:</div>
                    <div class="bar-bg"><div class="bar-fill" style="width:${p.desire}%; background:var(--hot-pink)"></div></div>
                    <div style="font-size:12px; color:#888; margin:5px 0;">G√ºven:</div>
                    <div class="bar-bg"><div class="bar-fill" style="width:${p.trust}%; background:cyan"></div></div>
                </div>
            `;
        });
    }

    function selectPartner(i) {
        currentPartner = partners[i];
        document.getElementById('char-name').innerText = currentPartner.name;
        document.getElementById('char-img').innerText = currentPartner.icon;
        document.getElementById('char-desc').innerText = currentPartner.desc;
        document.getElementById('action-menu').classList.remove('hidden');
    }

    function togglePhone() { document.getElementById('phone').classList.toggle('active'); }
    
    function openApp(app) {
        document.querySelectorAll('.app-screen').forEach(s => s.classList.remove('active'));
        if(app === 'main') document.getElementById('phone-home').classList.add('active');
        if(app === 'messages') { 
            document.getElementById('app-messages').classList.add('active'); 
            // Mesajla≈üma ekranƒ±nƒ± partner se√ßiliyse y√ºkle
            if(currentPartner) {
                selectedChatPartnerId = currentPartner.id;
                loadChat(currentPartner.id);
                document.getElementById('current-chat').classList.remove('hidden');
                document.getElementById('no-chat-selected').classList.add('hidden');
            } else {
                document.getElementById('current-chat').classList.add('hidden');
                document.getElementById('no-chat-selected').classList.remove('hidden');
            }
        }
    }

    function interact(type) {
        if(!currentPartner) return;
        if(type === 'gift') {
            if(player.money < 1000) { alert("Kasan yetersiz!"); return; }
            player.money -= 1000;
            currentPartner.trust += 20;
            alert(`${currentPartner.name}: "Bunu benim i√ßin mi aldƒ±n? Harikasƒ±n!"`);
        }
        renderPartners();
        updateHUD();
    }

    function loadChat(partnerId) {
        const chatWindow = document.getElementById('chat-window');
        chatWindow.innerHTML = "";
        const p = partners.find(p => p.id === partnerId);
        document.getElementById('chat-partner-name').innerText = p.name;
        p.messages.forEach(msg => {
            const div = document.createElement('div');
            div.classList.add('message', msg.sender === 'player' ? 'user-msg' : 'partner-msg');
            div.innerText = msg.text;
            chatWindow.appendChild(div);
        });
        chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    function sendMessage() {
        const msgText = document.getElementById('msg-text').value;
        if (!msgText.trim()) return;

        const p = partners.find(p => p.id === selectedChatPartnerId);
        p.messages.push({ sender: 'player', text: msgText });

        // Partnerin otomatik cevabƒ± ve etki
        setTimeout(() => {
            let reply = "";
            let desireIncrease = 0;
            let trustIncrease = 0;

            if (msgText.toLowerCase().includes("seksy") || msgText.toLowerCase().includes("s√ºrt√ºk") || msgText.toLowerCase().includes("g√∂t")) {
                reply = "Ne diyorsun sen?! Biraz saygƒ±lƒ± ol.";
                p.trust -= 10;
                p.desire -= 5;
            } else if (msgText.toLowerCase().includes("a≈ükƒ±m") || msgText.toLowerCase().includes("tatlƒ±m")) {
                reply = "Seni duymak g√ºzel :)";
                p.trust += 5;
                p.desire += 5;
            } else if (msgText.toLowerCase().includes("ne yapƒ±yorsun") || msgText.toLowerCase().includes("nasƒ±lsƒ±n")) {
                reply = "ƒ∞yiyim, sen?";
            } else if (msgText.toLowerCase().includes("√∂p√ºc√ºk") || msgText.toLowerCase().includes("√∂p√º≈üelim")) {
                reply = "Umm, √ßok ate≈ülisin üî•";
                p.desire += 15;
            } else if (msgText.toLowerCase().includes("√ßƒ±plak") || msgText.toLowerCase().includes("soyunsan")) {
                reply = "Aaaah... Bunun i√ßin biraz daha beklemelisin üòâ";
                p.desire += 20;
            } else {
                reply = "Hmm, ilgin√ß...";
            }
            
            p.messages.push({ sender: 'partner', text: reply });
            loadChat(selectedChatPartnerId);
            renderPartners(); // Barlarƒ±n g√ºncellenmesi i√ßin
        }, 1000);

        document.getElementById('msg-text').value = '';
        loadChat(selectedChatPartnerId); // Mesajƒ± hemen g√∂rmek i√ßin
    }

    function startSex() {
        if (!currentPartner) { alert("√ñnce bir partner se√ßmelisin!"); return; }
        if (currentPartner.desire < 60 || currentPartner.trust < 40) {
            alert("Hen√ºz yeterince hazƒ±r deƒüil. Biraz daha etkilemen lazƒ±m!");
            return;
        }

        const cin = document.getElementById('cinematic');
        const dialogText = document.getElementById('cinematic-dialog');
        const char1 = document.getElementById('char1');
        const char2 = document.getElementById('char2');
        
        char1.innerText = currentPartner.icon;
        char2.innerText = "‚ôÇÔ∏è"; // Player icon

        const cinematicActions = [
            { text: `${currentPartner.name}: "Sonunda ba≈ü ba≈üayƒ±z..."`, icon1: currentPartner.icon, icon2: "‚ôÇÔ∏è" },
            { text: "Eller birbirini buluyor...", icon1: "üíë", icon2: " " },
            { text: `${currentPartner.name}: "√áok ate≈ülisin..."`, icon1: "üî•", icon2: "üî•" },
            { text: "Nefesler kesiliyor, ten tene deƒüiyor...", icon1: "üíã", icon2: " " },
            { text: `${currentPartner.name}: "Beni kendine al..."`, icon1: "üí¶", icon2: " " },
            { text: "Tutku zirveye ula≈üƒ±yor...", icon1: "üîû", icon2: "üîû" },
            { text: "V√ºcutlar gev≈üiyor, sakin bir huzur...", icon1: "üò¥", icon2: "üò¥" },
        ];

        cin.classList.add('active');
        let step = 0;
        
        const interval = setInterval(() => {
            if(step < cinematicActions.length) {
                dialogText.innerText = cinematicActions[step].text;
                char1.innerText = cinematicActions[step].icon1;
                char2.innerText = cinematicActions[step].icon2;
                step++;
            }
        }, 2200); // Her adƒ±m 2.2 saniye

        setTimeout(() => {
            clearInterval(interval);
            cin.classList.remove('active');
            player.prestige += 100;
            player.libido = 100; // Libido sƒ±fƒ±rlandƒ±
            currentPartner.desire = 20; // De≈üarj oldu
            currentPartner.trust += 10; // Yakƒ±nlƒ±k arttƒ±
            updateHUD();
            renderPartners();
            alert("Muhte≈üem bir geceydi, ili≈ükiniz derinle≈üti.");
        }, cinematicActions.length * 2200); // Toplam s√ºre
    }

    updateHUD();
    renderPartners();
</script>
</body>
</html>
