<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HALVIOR OMNIVERSAL // SYSTEM 9.0</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        /* --- CORE ARCHITECTURE --- */
        :root {
            --bg: #030303;
            --panel: #0d0d11;
            --accent: #a855f7;
            --accent-glow: rgba(168, 85, 247, 0.4);
            --text-high: #ffffff;
            --text-dim: #6b7280;
            --border: 1px solid rgba(255, 255, 255, 0.08);
            --glass: rgba(255, 255, 255, 0.02);
            --success: #10b981;
            --danger: #ef4444;
        }

        * { box-sizing: border-box; transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); }
        body { margin: 0; background: var(--bg); color: var(--text-high); font-family: 'Inter', sans-serif; display: flex; height: 100vh; overflow: hidden; }

        /* --- SIDEBAR (THE HUB) --- */
        #sidebar {
            width: 300px;
            background: var(--panel);
            border-right: var(--border);
            display: flex;
            flex-direction: column;
            padding: 20px;
            z-index: 50;
        }

        .brand { font-family: 'JetBrains Mono', monospace; font-weight: 800; font-size: 1.5rem; background: linear-gradient(45deg, #a855f7, #3b82f6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 25px; }

        .btn-primary { background: var(--accent); color: white; border: none; padding: 12px; border-radius: 12px; font-weight: 600; cursor: pointer; margin-bottom: 10px; display: flex; align-items: center; gap: 10px; justify-content: center; }
        .btn-primary:hover { box-shadow: 0 0 20px var(--accent-glow); transform: translateY(-2px); }

        .section-label { font-size: 0.7rem; color: var(--text-dim); text-transform: uppercase; font-weight: 800; margin: 15px 0 10px 0; letter-spacing: 1px; }
        
        #history-box { flex: 1; overflow-y: auto; margin-bottom: 20px; }
        .hist-item { padding: 10px; border-radius: 8px; font-size: 0.85rem; color: var(--text-dim); cursor: pointer; margin-bottom: 5px; border: 1px solid transparent; }
        .hist-item:hover { background: var(--glass); color: #fff; border-color: var(--border); }

        /* --- DASHBOARD WIDGETS --- */
        #dashboard { width: 320px; background: var(--panel); border-left: var(--border); padding: 15px; display: flex; flex-direction: column; gap: 15px; overflow-y: auto; }
        .widget { background: #000; border: var(--border); border-radius: 12px; padding: 15px; }
        .widget h4 { margin: 0 0 10px 0; font-size: 0.8rem; color: var(--accent); display: flex; justify-content: space-between; }
        .finance-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-family: 'JetBrains Mono'; font-size: 0.75rem; }
        .price-up { color: var(--success); }
        .price-down { color: var(--danger); }

        /* --- MAIN VIEWPORT --- */
        #viewport { flex: 1; display: flex; flex-direction: column; background: radial-gradient(circle at 50% 10%, #151520, #030303); }
        #chat-container { flex: 1; overflow-y: auto; padding: 50px 12% 120px 12%; display: flex; flex-direction: column; gap: 40px; scroll-behavior: smooth; }

        .msg { display: flex; gap: 20px; animation: slideIn 0.4s ease forwards; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        .avatar { width: 45px; height: 45px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-weight: 900; flex-shrink: 0; border: var(--border); }
        .avatar.halvior { background: linear-gradient(135deg, #a855f7, #3b82f6); color: #fff; box-shadow: 0 0 20px rgba(168, 85, 247, 0.3); }
        .avatar.user { background: #1f2937; color: #fff; }

        .bubble { max-width: 85%; line-height: 1.8; font-size: 1rem; color: #e5e7eb; }
        .bubble b { color: var(--accent); }

        /* --- SPECIAL COMPONENTS --- */
        .process-log { background: #000; border: var(--border); border-radius: 10px; padding: 15px; margin: 15px 0; font-family: 'JetBrains Mono'; font-size: 0.75rem; }
        .log-line { margin-bottom: 5px; display: flex; align-items: center; gap: 10px; }
        .log-line.active { color: var(--accent); animation: blink 0.8s infinite; }
        .log-line.done { color: var(--success); }
        @keyframes blink { 50% { opacity: 0.3; } }

        .news-card { background: var(--glass); padding: 10px; border-radius: 8px; margin-top: 10px; border-left: 3px solid var(--accent); }

        /* --- INPUT --- */
        #input-dock { position: absolute; bottom: 0; width: 100%; padding: 30px 12%; background: linear-gradient(to top, var(--bg) 80%, transparent); }
        .bar { background: rgba(20, 20, 25, 0.8); backdrop-filter: blur(20px); border: var(--border); border-radius: 20px; padding: 8px 25px; display: flex; align-items: center; box-shadow: 0 10px 50px rgba(0,0,0,0.8); }
        textarea { flex: 1; background: transparent; border: none; color: #fff; font-size: 1.05rem; padding: 15px 0; resize: none; height: 55px; outline: none; }
        #send-btn { background: var(--accent); color: white; border: none; width: 50px; height: 50px; border-radius: 15px; cursor: pointer; font-size: 1.3rem; margin-left: 15px; }
        #send-btn:hover { transform: scale(1.1) rotate(5deg); box-shadow: 0 0 25px var(--accent); }

        /* GAME SANDBOX */
        .game-canvas { width: 100%; height: 200px; background: #000; border: 1px solid #333; margin-top: 15px; display: flex; align-items: center; justify-content: center; }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    </style>
</head>
<body>

<div id="sidebar">
    <div class="brand">HALVIOR Î©</div>
    <button class="btn-primary" onclick="newSession()">+ NEW SESSION</button>
    
    <div class="section-label">System Modules</div>
    <div style="font-size:0.8rem; display:flex; flex-direction:column; gap:8px;">
        <div onclick="showGame()" style="cursor:pointer">ðŸŽ® Matrix Sandbox</div>
        <div onclick="getNews()" style="cursor:pointer">ðŸ“° Live News Feed</div>
        <div onclick="clearMemory()" style="cursor:pointer; color:var(--danger)">ðŸ’€ Wipe Memory</div>
    </div>

    <div class="section-label">History Nodes</div>
    <div id="history-box"></div>

    <div style="margin-top:auto; font-size:0.65rem; color:var(--text-dim); font-family:'JetBrains Mono'">
        KERNEL: v9.4.2-STABLE<br>
        UPTIME: <span id="uptime">0s</span>
    </div>
</div>

<div id="viewport">
    <div id="chat-container">
        <div class="msg">
            <div class="avatar halvior">H</div>
            <div class="bubble">
                <b>[SYSTEM INITIALIZED]:</b> TÃ¼m Ã§ekirdekler aktif. <br>
                Wiki, Borsa, Haber ve Oyun modÃ¼lleri senkronize edildi. IsÄ±nmaya hazÄ±r ol knk, bu sÃ¼rÃ¼mde sÄ±nÄ±r yok.
            </div>
        </div>
    </div>

    <div id="input-dock">
        <div class="bar">
            <textarea id="inp" placeholder="Wiki'den sor, kod iste, borsa sor veya oyun aÃ§..."></textarea>
            <button id="send-btn" onclick="execute()">âž¤</button>
        </div>
    </div>
</div>

<div id="dashboard">
    <div class="section-label">Live Financials</div>
    <div class="widget">
        <h4>Markets <span style="font-size:0.6rem">LIVE</span></h4>
        <div class="finance-grid" id="market-data">
            <div>BTC/USD</div><div class="price-up">$96,432</div>
            <div>USD/TRY</div><div class="price-up">34.12</div>
            <div>ETH/USD</div><div class="price-down">$2,451</div>
            <div>GOLD/OZ</div><div class="price-up">$2,640</div>
        </div>
    </div>

    <div class="section-label">Local Intel</div>
    <div class="widget">
        <h4 id="city-name">Istanbul</h4>
        <div style="font-size:1.5rem; font-weight:800;" id="temp">14Â°C</div>
        <div style="font-size:0.7rem; color:var(--text-dim)" id="desc">ParÃ§alÄ± Bulutlu</div>
    </div>

    <div class="section-label">Process Analytics</div>
    <div class="widget" style="font-family:'JetBrains Mono'; font-size:0.65rem;">
        <div>CPU: <span id="cpu-load">0%</span></div>
        <div style="width:100%; height:4px; background:#222; margin:5px 0;">
            <div id="cpu-bar" style="width:0%; height:100%; background:var(--accent)"></div>
        </div>
        <div>RAM: 1.8GB / 16GB</div>
    </div>
</div>

<script>
    // --- UTILS & MEMORY ---
    let uptime = 0;
    setInterval(() => { uptime++; document.getElementById("uptime").innerText = uptime + "s"; }, 1000);
    setInterval(() => { 
        let load = Math.floor(Math.random()*60 + 20);
        document.getElementById("cpu-load").innerText = load + "%";
        document.getElementById("cpu-bar").style.width = load + "%";
    }, 2000);

    window.onload = () => {
        const hist = JSON.parse(localStorage.getItem("halvior_omni_hist") || "[]");
        hist.forEach(h => addHistoryItem(h));
        const chatSaved = localStorage.getItem("halvior_omni_chat");
        if(chatSaved) document.getElementById("chat-container").innerHTML = chatSaved;
    };

    function saveState() {
        localStorage.setItem("halvior_omni_chat", document.getElementById("chat-container").innerHTML);
    }

    function addHistoryItem(txt) {
        const div = document.createElement("div");
        div.className = "hist-item";
        div.innerText = txt.substring(0, 25) + "...";
        document.getElementById("history-box").prepend(div);
    }

    // --- LOGIC ENGINE ---
    const steps = [
        "SYNAPSE_LOAD: OK", "WIKI_BRIDGE: LINKED", "DATA_SCRAPER: ACTIVE", 
        "CONTEXT_INHERITANCE: 100%", "LOGIC_GATE: OPEN", "RENDER_ENGINE: READY"
    ];

    async function execute() {
        const val = document.getElementById("inp").value.trim();
        if(!val) return;

        // User Entry
        addMessage(val, 'user');
        document.getElementById("inp").value = "";
        
        // AI Logic Start
        const aiMsg = createAiRow();
        const bubble = aiMsg.querySelector(".bubble");
        
        // 15 Steps Log
        const logBox = document.createElement("div");
        logBox.className = "process-log";
        bubble.appendChild(logBox);

        for(let s of steps) {
            const l = document.createElement("div");
            l.className = "log-line active";
            l.innerText = "> " + s;
            logBox.appendChild(l);
            document.getElementById("chat-container").scrollTop = document.getElementById("chat-container").scrollHeight;
            await new Promise(r => setTimeout(r, 150));
            l.className = "log-line done";
        }

        // --- MODULE ROUTING ---
        let response = "";
        const low = val.toLowerCase();

        if(low.includes("hava") || low.includes("sÄ±caklÄ±k")) {
            response = "<b>Hava Durumu ModÃ¼lÃ¼:</b> Ä°stanbul iÃ§in ÅŸu an 14Â°C, nem %60. YarÄ±n yaÄŸÄ±ÅŸ bekleniyor knk.";
        } 
        else if(low.includes("borsa") || low.includes("dolar") || low.includes("bitcoin")) {
            response = "<b>Finans ModÃ¼lÃ¼:</b> Piyasalar hareketli. BTC: $96,432 (+2.4%), USD/TRY: 34.12. Dikkatli oyna knk.";
        }
        else if(low.includes("oyun") || low.includes("matrix")) {
            response = "<b>Gaming Sandbox:</b> Matrix simÃ¼lasyonu baÅŸlatÄ±ldÄ±. AkÄ±ÅŸÄ± izle.";
            bubble.innerHTML += `<div class="game-canvas" id="m-canvas">MATRIX_RUNNING_PROX...</div>`;
            startMatrix();
        }
        else if(low.includes("haber") || low.includes("gÃ¼ndem")) {
            response = "<b>News Feed:</b> BugÃ¼n teknoloji dÃ¼nyasÄ±nda yapay zeka devrimi konuÅŸuluyor. SpaceX yeni bir fÄ±rlatma yaptÄ±.";
        }
        else if(low.includes("nedir") || low.includes("kimdir")) {
            const q = val.replace("nedir","").replace("kimdir","").trim();
            try {
                const res = await fetch(`https://tr.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(q)}`);
                const data = await res.json();
                response = data.extract ? `<b>Wiki-Intel (${q}):</b><br>${data.extract}` : "Bilgi bulunamadÄ± knk.";
            } catch(e) { response = "Veri baÄŸlantÄ±sÄ± hatasÄ±!"; }
        }
        else if(low.includes("kod")) {
            response = "<b>Coder Mode:</b> Ä°stediÄŸin algoritma optimize edildi.<br><div style='background:#000; padding:15px; border-radius:10px; margin-top:10px; font-family:monospace; color:#82aaff;'>def halvior_overlord():<br>&nbsp;&nbsp;print('System Unleashed')<br>&nbsp;&nbsp;return True</div>";
        }
        else {
            response = "MesajÄ±n analiz edildi knk. HafÄ±zama (localStorage) kaydettim. Devam edelim.";
        }

        const resBody = document.createElement("div");
        resBody.style.marginTop = "15px";
        resBody.innerHTML = response;
        bubble.appendChild(resBody);
        
        document.getElementById("chat-container").scrollTop = document.getElementById("chat-container").scrollHeight;
        saveState();
        addHistoryItem(val);
    }

    function addMessage(t, type) {
        const row = createRow(type);
        row.querySelector('.bubble').innerText = t;
        document.getElementById("chat-container").appendChild(row);
        document.getElementById("chat-container").scrollTop = document.getElementById("chat-container").scrollHeight;
    }

    function createRow(type) {
        const d = document.createElement("div");
        d.className = `msg ${type}`;
        d.innerHTML = `<div class="avatar ${type}">${type=='halvior'?'H':'S'}</div><div class="bubble"></div>`;
        return d;
    }

    function createAiRow() {
        const d = createRow('halvior');
        document.getElementById("chat-container").appendChild(d);
        return d;
    }

    function startMatrix() {
        // KÃ¼Ã§Ã¼k bir Matrix efekti simÃ¼lasyonu (Daha fazlasÄ± satÄ±r sayÄ±sÄ±nÄ± 2000 yapar)
        let c = document.getElementById("m-canvas");
        if(c) {
            let i = 0;
            setInterval(() => {
                c.innerText = "MATRIX_CODE_" + Math.random().toString(16).substring(2, 10);
                c.style.color = "#0f0";
            }, 100);
        }
    }

    function newSession() { if(confirm("TÃ¼m oturumu sÄ±fÄ±rlÄ±yorum?")) { localStorage.clear(); location.reload(); } }
    function clearMemory() { localStorage.clear(); location.reload(); }
</script>

</body>
</html>
