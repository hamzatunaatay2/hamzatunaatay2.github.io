<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HALVIOR // GEMINI OVERLORD</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-main: #131314;
            --bg-side: #1e1f20;
            --bg-hover: #333537;
            --accent: #a8c7fa;
            --text-main: #e3e3e3;
            --text-sub: #b4b4b4;
            --border: #444746;
        }

        * { box-sizing: border-box; transition: background 0.2s; }
        body { margin: 0; background: var(--bg-main); color: var(--text-main); font-family: 'Google Sans', sans-serif; display: flex; height: 100vh; overflow: hidden; }

        /* --- SIDEBAR (GEMINI STYLE) --- */
        #sidebar {
            width: 300px;
            background: var(--bg-side);
            display: flex;
            flex-direction: column;
            padding: 16px;
            position: relative;
        }

        .new-chat-btn {
            margin-top: 30px;
            background: #282a2c;
            border: none;
            color: var(--text-main);
            padding: 14px 20px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            font-weight: 500;
            width: fit-content;
        }
        .new-chat-btn:hover { background: #37393b; }

        .sidebar-section { margin-top: 30px; flex: 1; overflow-y: auto; }
        .sidebar-title { font-size: 0.85rem; padding: 0 12px; margin-bottom: 12px; color: var(--text-main); font-weight: 500; }
        .history-link {
            padding: 10px 12px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .history-link:hover { background: var(--bg-hover); }

        /* --- DATA WIDGETS (SÄ°LEMEDÄ°ÄžÄ°MÄ°Z BÄ°LGÄ°LER) --- */
        .widget-area { border-top: 1px solid var(--border); padding-top: 15px; margin-top: auto; }
        .data-card { background: rgba(255,255,255,0.05); padding: 12px; border-radius: 12px; margin-bottom: 8px; font-size: 0.8rem; }
        .data-card b { color: var(--accent); display: block; margin-bottom: 4px; }
        .ticker { font-family: 'JetBrains Mono'; font-size: 0.75rem; display: flex; justify-content: space-between; }

        /* --- MAIN CONTENT AREA --- */
        #main-view { flex: 1; display: flex; flex-direction: column; position: relative; }
        
        #chat-scroller {
            flex: 1;
            overflow-y: auto;
            padding: 40px 15% 150px 15%;
            display: flex;
            flex-direction: column;
            gap: 40px;
        }

        .chat-row { display: flex; gap: 24px; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .icon {
            width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            flex-shrink: 0; font-size: 1.2rem;
        }
        .icon.halvior { background: linear-gradient(to bottom right, #4285f4, #9b72cb); color: white; }
        .icon.user { background: #56585a; color: white; }

        .message-content { flex: 1; line-height: 1.7; font-size: 1.05rem; }
        .message-content b { color: var(--accent); }

        /* --- TERMINAL & CARDS --- */
        .logic-terminal {
            background: #000; border: 1px solid var(--border); border-radius: 12px;
            padding: 16px; margin: 15px 0; font-family: 'JetBrains Mono'; font-size: 0.8rem;
        }
        .log-line { color: #5f6368; margin-bottom: 4px; }
        .log-line.active { color: #8ab4f8; }
        .log-line.done { color: #81c995; }

        .gemini-card {
            background: #1e1f20; border: 1px solid var(--border); border-radius: 16px;
            padding: 20px; margin-top: 15px;
        }

        /* --- INPUT BAR (FIXED) --- */
        #bottom-container {
            position: absolute; bottom: 0; width: 100%;
            padding: 20px 15% 40px 15%;
            background: linear-gradient(to top, var(--bg-main) 70%, transparent);
        }
        .input-wrapper {
            background: #1e1f20; border-radius: 32px; padding: 8px 24px;
            display: flex; align-items: center; border: 1px solid transparent;
        }
        .input-wrapper:focus-within { border-color: var(--border); background: #282a2c; }
        
        textarea {
            flex: 1; background: transparent; border: none; color: white;
            font-size: 1rem; padding: 12px 0; resize: none; height: 52px; outline: none;
            font-family: inherit;
        }
        #send-btn {
            background: none; border: none; color: var(--accent);
            cursor: pointer; padding: 8px; font-size: 1.5rem; display: flex;
        }
        #send-btn:disabled { color: var(--border); cursor: not-allowed; }

        /* --- SCROLLBAR --- */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 10px; }
    </style>
</head>
<body>

<div id="sidebar">
    <div class="new-chat-btn" onclick="resetChat()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
        Yeni Sohbet
    </div>

    <div class="sidebar-section">
        <div class="sidebar-title">YakÄ±n Zamanda</div>
        <div id="history-container">
            <div class="history-link">Halvior Mimari Taslak...</div>
            <div class="history-link">Finansal Veri Analizi...</div>
        </div>
    </div>

    <div class="widget-area">
        <div class="data-card">
            <b>Piyasalar (CanlÄ±)</b>
            <div class="ticker"><span>BTC</span> <span style="color:#81c995">$96,120</span></div>
            <div class="ticker"><span>USD/TRY</span> <span style="color:#81c995">34.15</span></div>
        </div>
        <div class="data-card">
            <b>Hava Durumu</b>
            <div class="ticker"><span>Ä°stanbul</span> <span>14Â°C</span></div>
        </div>
        <div style="font-family:'JetBrains Mono'; font-size:0.6rem; color:var(--text-sub); padding:10px;">
            CPU: <span id="cpu">12%</span> | RAM: 2.1GB
        </div>
    </div>
</div>

<div id="main-view">
    <div id="chat-scroller">
        <div class="chat-row">
            <div class="icon halvior">H</div>
            <div class="message-content">
                <b>Selam knk, Halvior Î© v10.0 YayÄ±nda.</b><br><br>
                ArayÃ¼zÃ¼ birebir Gemini temizliÄŸine Ã§ektim. Sol panelde borsa ve hava durumu verilerin akmaya devam ediyor. HafÄ±za modÃ¼lÃ¼ ÅŸu an her ÅŸeyi tarayÄ±cÄ±na (Local Storage) kaydediyor. <br><br>
                <i>Hadi aslanÄ±m, neyi analiz edelim?</i>
            </div>
        </div>
    </div>

    <div id="bottom-container">
        <div class="input-wrapper">
            <textarea id="user-input" placeholder="Buraya bir ÅŸeyler yaz knk..."></textarea>
            <button id="send-btn" onclick="processMessage()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
            </button>
        </div>
        <div style="font-size:0.75rem; text-align:center; color:var(--text-sub); margin-top:12px;">
            Halvior hata yapabilir knk, bilgileri kontrol etmeyi unutma.
        </div>
    </div>
</div>

<script>
    const scroller = document.getElementById("chat-scroller");
    const input = document.getElementById("user-input");
    const sendBtn = document.getElementById("send-btn");

    // Sistem Verileri
    setInterval(() => {
        document.getElementById("cpu").innerText = Math.floor(Math.random()*30 + 10) + "%";
    }, 3000);

    // Enter KontrolÃ¼
    input.addEventListener("keydown", (e) => {
        if(e.key === "Enter" && !e.shiftKey) {
            e.preventDefault();
            processMessage();
        }
    });

    // HAFIZA YÃœKLEME
    window.onload = () => {
        const memory = localStorage.getItem("halvior_gemini_v10");
        if(memory) {
            scroller.innerHTML = memory;
            scroller.scrollTop = scroller.scrollHeight;
        }
    };

    function save() { localStorage.setItem("halvior_gemini_v10", scroller.innerHTML); }

    const logicSteps = [
        "Niyet Analiz Ediliyor...",
        "Veri KaynaklarÄ± TaranÄ±yor (Wiki, Finance)...",
        "Semantik BaÄŸlam Kuruluyor...",
        "Halvior MantÄ±k SÃ¼zgeci Aktif...",
        "Cevap Render Ediliyor..."
    ];

    async function processMessage() {
        const text = input.value.trim();
        if(!text) return;

        // 1. KullanÄ±cÄ± MesajÄ±
        addMessage(text, 'user');
        input.value = "";
        sendBtn.disabled = true;

        // 2. AI YanÄ±t AlanÄ±
        const aiRow = createRow('halvior');
        scroller.appendChild(aiRow);
        const content = aiRow.querySelector('.message-content');

        // 3. 15 Madde Terminali
        const term = document.createElement("div");
        term.className = "logic-terminal";
        content.appendChild(term);

        for(let step of logicSteps) {
            const line = document.createElement("div");
            line.className = "log-line active";
            line.innerText = "> " + step;
            term.appendChild(line);
            scroller.scrollTop = scroller.scrollHeight;
            await new Promise(r => setTimeout(r, 200));
            line.className = "log-line done";
        }

        // 4. MANTIK & CEVAP MOTORU
        let response = "";
        const low = text.toLowerCase();

        if(low.includes("borsa") || low.includes("dolar") || low.includes("para")) {
            response = `<div class="gemini-card"><b>ðŸ“Š Finansal Analiz:</b><br><br>Knk piyasalar ÅŸu an ÅŸÃ¶yle: BTC $96k bandÄ±nda geziniyor, USD/TRY ise 34.15 seviyelerinde. IsÄ±nma olursa soÄŸutmaya dikkat et!</div>`;
        } 
        else if(low.includes("nedir") || low.includes("kimdir")) {
            const query = text.replace("nedir","").replace("kimdir","").trim();
            try {
                const res = await fetch(`https://tr.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(query)}`);
                const data = await res.json();
                response = data.extract ? `<b>ðŸ§  Wiki Bilgi KartÄ±:</b><br><br>${data.extract}` : "Knk Wiki'de bunu bulamadÄ±m ama genel olarak biliyorum, devam edelim.";
            } catch(e) { response = "Veri baÄŸlantÄ±sÄ± kurulamadÄ± knk."; }
        }
        else if(low.includes("kod") || low.includes("html") || low.includes("js")) {
            response = `<b>ðŸ’» YazÄ±lÄ±m GeliÅŸtirme:</b><br><br>Ä°stediÄŸin yapÄ±yÄ± optimize ettim. Ä°ÅŸte terminal Ã§Ä±ktÄ±sÄ±:<br><pre style="background:#000; padding:15px; border-radius:12px; color:#a8c7fa; margin-top:10px;">// Halvior Code Node\nfunction init() {\n  console.log('System Online');\n}</pre>`;
        }
        else {
            response = "AnlaÅŸÄ±ldÄ± aslanÄ±m. Bu veriyi hafÄ±za bankama (LocalStorage) kaydettim. BaÅŸka neyi Ã§Ã¶zelim?";
        }

        const resDiv = document.createElement("div");
        resDiv.style.marginTop = "15px";
        resDiv.innerHTML = response;
        content.appendChild(resDiv);
        
        scroller.scrollTop = scroller.scrollHeight;
        sendBtn.disabled = false;
        save();
    }

    function addMessage(t, type) {
        const row = createRow(type);
        row.querySelector('.message-content').innerText = t;
        scroller.appendChild(row);
        scroller.scrollTop = scroller.scrollHeight;
    }

    function createRow(type) {
        const d = document.createElement("div");
        d.className = `chat-row`;
        d.innerHTML = `<div class="icon ${type}">${type=='halvior'?'H':'S'}</div><div class="message-content"></div>`;
        return d;
    }

    function resetChat() {
        if(confirm("TÃ¼m sohbet geÃ§miÅŸini silelim mi knk?")) {
            localStorage.clear();
            location.reload();
        }
    }
</script>

</body>
</html>
